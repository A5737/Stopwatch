<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>stopwatch</title>
<style>
  :root {
    --bg-color: #fff;
    --text-color: #000;
    --card-bg: #f9f9f9;
    --btn-bg: #4CAF50;
    --btn-hover: #45a049;
    --delete-bg: #f44336;
    --delete-hover: #da190b;
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --bg-color: #1e1e1e;
      --text-color: #fff;
      --card-bg: #2c2c2c;
      --btn-bg: #28a745;
      --btn-hover: #218838;
      --delete-bg: #dc3545;
      --delete-hover: #c82333;
    }
  }
  body {
    font-family: Arial, sans-serif;
    background: var(--bg-color);
    color: var(--text-color);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 30px 10px;
    min-height: 100vh;
    transition: background 0.3s, color 0.3s;
  }
  h1 {
    text-align: center;
    margin-bottom: 20px;
  }
  #add-container {
    display: flex;
    margin-bottom: 20px;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
  }
  #new-name {
    padding: 10px;
    border-radius: 8px;
    border: none;
    font-size: 16px;
    background: var(--card-bg);
    color: var(--text-color);
    outline: none;
  }
  #add-btn {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    background: var(--btn-bg);
    color: #fff;
    cursor: pointer;
    font-size: 16px;
    transition: background 0.3s;
  }
  #add-btn:hover { background: var(--btn-hover); }
  #timers {
    display: flex;
    flex-direction: column;
    gap: 15px;
    width: 100%;
    max-width: 500px;
  }
  .timer-card {
    background: var(--card-bg);
    padding: 15px 20px;
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    transition: background 0.3s, color 0.3s;
  }
  .timer-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .timer-name {
    font-weight: bold;
    font-size: 18px;
  }
  .timer-display {
    font-size: 24px;
    font-weight: bold;
    text-align: center;
  }
  .timer-buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
  }
  .timer-buttons button {
    padding: 8px 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.3s;
    color: #fff;
  }
  .start-btn { background: var(--btn-bg); }
  .start-btn:hover { background: var(--btn-hover); }
  .stop-btn { background: #f0ad4e; }
  .stop-btn:hover { background: #ec971f; }
  .reset-btn { background: #17a2b8; }
  .reset-btn:hover { background: #138496; }
  .delete-btn { background: var(--delete-bg); }
  .delete-btn:hover { background: var(--delete-hover); }

  footer {
    margin-top: 30px;
    text-align: center;
    font-size: 14px;
  }
  footer a { text-decoration: none; color: var(--btn-bg); margin: 0 5px;}
  footer a:hover { text-decoration: underline; }
</style>
</head>
<body>
<h1>Stopwatch</h1>

<div id="add-container">
  <input type="text" id="new-name" placeholder="اسم العداد الجديد">
  <button id="add-btn">إضافة عداد</button>
</div>

<div id="timers"></div>

<footer>
تواصل: 
<a href="https://instagram.com/247.4" target="_blank">Instagram</a> | 
<a href="https://t.me/Upside2474" target="_blank">Telegram</a>
</footer>

<script>
let timers = JSON.parse(localStorage.getItem('timers')) || [];

function saveTimers() { localStorage.setItem('timers', JSON.stringify(timers)); }

function formatTime(ms) {
  const totalSec = Math.floor(ms/1000);
  const hrs = Math.floor(totalSec/3600);
  const mins = Math.floor((totalSec%3600)/60);
  const secs = totalSec%60;
  return `${hrs.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
}

function createTimerCard(timer, index) {
  const card = document.createElement('div');
  card.className = 'timer-card';

  const header = document.createElement('div');
  header.className = 'timer-header';

  const nameEl = document.createElement('div');
  nameEl.className = 'timer-name';
  nameEl.textContent = timer.name;

  const delBtn = document.createElement('button');
  delBtn.className = 'delete-btn';
  delBtn.textContent = 'حذف';
  delBtn.onclick = () => {
    timers.splice(index,1);
    saveTimers();
    renderTimers();
  }

  header.appendChild(nameEl);
  header.appendChild(delBtn);

  const display = document.createElement('div');
  display.className = 'timer-display';
  display.textContent = formatTime(timer.time);

  const btnContainer = document.createElement('div');
  btnContainer.className = 'timer-buttons';

  const startBtn = document.createElement('button');
  startBtn.className = 'start-btn';
  startBtn.textContent = 'ابدأ';

  const stopBtn = document.createElement('button');
  stopBtn.className = 'stop-btn';
  stopBtn.textContent = 'توقف';

  const resetBtn = document.createElement('button');
  resetBtn.className = 'reset-btn';
  resetBtn.textContent = 'إعادة ضبط';

  let interval;
  startBtn.onclick = () => {
    clearInterval(interval);
    const startTime = Date.now() - timer.time;
    interval = setInterval(() => {
      timer.time = Date.now() - startTime;
      display.textContent = formatTime(timer.time);
    }, 500);
  }

  stopBtn.onclick = () => { clearInterval(interval); saveTimers(); }
  resetBtn.onclick = () => { clearInterval(interval); timer.time=0; display.textContent=formatTime(0); saveTimers(); }

  btnContainer.appendChild(startBtn);
  btnContainer.appendChild(stopBtn);
  btnContainer.appendChild(resetBtn);

  card.appendChild(header);
  card.appendChild(display);
  card.appendChild(btnContainer);

  return card;
}

function renderTimers() {
  const container = document.getElementById('timers');
  container.innerHTML = '';
  timers.forEach((timer,index)=> {
    container.appendChild(createTimerCard(timer,index));
  });
}

document.getElementById('add-btn').onclick = () => {
  const nameInput = document.getElementById('new-name');
  const name = nameInput.value.trim() || `عداد ${timers.length+1}`;
  timers.push({name: name, time: 0});
  saveTimers();
  renderTimers();
  nameInput.value='';
}

renderTimers();
</script>
</body>
</html>